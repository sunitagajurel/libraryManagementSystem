<!DOCTYPE html>

<html>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <body>
    <form id = "myForm" >
     <input name="query" id = "query" type="text" />
     <button type="submit">Submit</button>
    </form>


    <table id="responseTable">
        <thead>
            <tr>
                <th>BookDesc</th>
                <th>Edition</th>
            </tr>
        </thead>
        <tbody id="tableBody"></tbody>
    </table>
  </body>
</html>


<script> 
$(document).ready(function() {
    // Intercept the form submission
    $("#myForm").submit(function(event) {
        event.preventDefault(); // Prevent the default form submission

        // Get form data
        var formData = {
            query: $("#query").val()
        };  

        // Send the POST request
        $.post("http://localhost:3001/search", formData, function(response) {
            // Clear the table body
            $("#tableBody").empty();

            // Parse the response as JSON
            // var data = JSON.parse(response);
            // console.log(data)

            // Populate the table
            var data = response
            $.each(data, function(index, item) {
                var row = $("<tr>");
                $("<td>").text(item.bookdesc).appendTo(row);
                $("<td>").text(item.edition).appendTo(row);
                row.appendTo("#tableBody");
            });
        });
    });
});

</script> 
